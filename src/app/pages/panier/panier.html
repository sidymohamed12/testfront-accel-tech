<section class="container mx-auto max-w-7xl p-4 md:p-8">
  <h1 class="text-center text-[#191919] dark:text-white text-[32px] font-semibold leading-[38px]">
    My Shopping Cart
  </h1>
  <div class="flex items-start mt-8 gap-6">
    <div class="bg-white p-4 w-[800px] rounded-xl">
      <table class="w-full bg-white rounded-xl">
        <thead>
          <tr
            class="text-center border-b border-gray-400 w-full text-[#7f7f7f] text-sm font-medium uppercase leading-[14px] tracking-wide"
          >
            <th class="text-left px-2 py-2">Product</th>
            <th class="px-2 py-2">price</th>
            <th class="px-2 py-2">Quantity</th>
            <th class="px-2 py-2">Subtotal</th>
            <th class="w-7 px-2 py-2"></th>
          </tr>
        </thead>
        <tbody>
          @for (produit of produitsPanier; track $index) {
          <tr class="text-center">
            <td class="px-2 py-2 text-left align-top flex">
              <button class="cursor-pointer" (click)="viewDetail(produit.id)">
                <img src="{{ produit.image }}" alt="test" class="w-20 mr-2 inline-block h-20" />
              </button>
              <div class="flex flex-col">
                <span>{{ produit.nom }}</span>
                <p class="text-green-600 font-bold mt-1">59 000 FCFA</p>
              </div>
            </td>
            <td class="px-2 py-2">{{ produit.newPrix ? produit.newPrix : produit.prix }}</td>
            <td class="p-2 mt-9 justify-around items-center flex">
              <div class="flex items-center border rounded-full">
                <button
                  (click)="updateQuantity(produit.id, Math.max(1, produit.qteCom! - 1))"
                  class="px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-l-full transition-all duration-200"
                >
                  <i class="fa-solid fa-minus"></i>
                </button>
                <input
                  type="number"
                  min="1"
                  [(ngModel)]="produit.qteCom"
                  (change)="updateQuantity(produit.id, produit.qteCom!)"
                  class="border-gray-300 text-center font-medium w-12 focus:outline-none focus:ring-0"
                />
                <button
                  (click)="updateQuantity(produit.id, produit.qteCom! + 1)"
                  class="px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-r-full transition-all duration-200"
                >
                  <i class="fa-solid fa-plus"></i>
                </button>
              </div>
            </td>
            <td class="px-2 py-2">
              {{ (produit.newPrix ? produit.newPrix : produit.prix) * produit.qteCom! }}
            </td>
            <td class="px-2 py-2">
              <button (click)="deleteItem(produit.id)"><i class="fa-solid fa-trash"></i></button>
            </td>
          </tr>
          }
        </tbody>
        <tfoot>
          <tr class="border-t border-gray-400">
            <td class="px-2 py-2" colspan="3">
              <button
                routerLink="/produits"
                class="px-8 cursor-pointer py-3.5 bg-[#f2f2f2] rounded-[43px] text-[#4c4c4c] text-sm font-semibold className leading-[16px]"
              >
                Return to shop
              </button>
            </td>
            <td class="px-2 py-2" colspan="2">
              <button
                (click)="clearCart()"
                class="px-8 py-3.5 cursor-pointer bg-[#f2f2f2] rounded-[43px] text-[#4c4c4c] text-sm font-semibold className leading-[16px]"
              >
                vider le panier
              </button>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
    <div class="w-[424px] bg-white rounded-lg p-6">
      <h2 class="text-[#191919] mb-2 text-xl font-medium leading-[30px]">Cart Total</h2>
      <div class="w-[376px] py-3 justify-between items-center flex">
        <span class="text-[#4c4c4c] text-base font-normal leading-normal">Total:</span
        ><span class="text-[#191919] text-base font-semibold leading-tight"
          >{{ panierService.panierFinal().total.toLocaleString() }} FCFA</span
        >
      </div>
      <div
        class="w-[376px] py-3 shadow-[0px_1px_0px_0px_rgba(229,229,229,1.00)] justify-between items-center flex"
      >
        <span class="text-[#4c4c4c] text-sm font-normal leading-[21px]">Shipping:</span
        ><span class="text-[#191919] text-sm font-medium leading-[21px]">Free</span>
      </div>
      <div
        class="w-[376px] py-3 shadow-[0px_1px_0px_0px_rgba(229,229,229,1.00)] justify-between items-center flex"
      >
        <span class="text-[#4c4c4c] text-sm font-normal leading-[21px]">Subtotal:</span
        ><span class="text-[#191919] text-sm font-medium leading-[21px]"
          >{{ panierService.panierFinal().total.toLocaleString() }} FCFA</span
        >
      </div>
      <button
        class="w-[376px] text-white mt-5 px-10 py-4 bg-[#00b206] rounded-[44px] gap-4 text-base font-semibold leading-tight"
      >
        Proceed to checkout
      </button>
    </div>
  </div>
  <div
    class="mt-6 p-5 w-[800px] bg-white rounded-lg border border-[#e6e6e6] justify-start items-center gap-6 inline-flex"
  >
    <h3 class="text-[#191919] w-1/4 text-xl font-medium className leading-[30px]">Coupon Code</h3>
    <div class="w-full border border-[#e6e6e6]">
      <input
        placeholder="Enter code"
        type="text"
        class="w-2/3 px-6 py-3.5 outline-none bg-white rounded-[46px] text-[#999999] text-base font-normal leading-normal"
      /><button
        class="px-10 py-4 bg-[#333333] rounded-[43px] text-white text-base font-semibold leading-tight"
      >
        Apply Coupon
      </button>
    </div>
  </div>
</section>

<!-- -------- ok ---------- -->

<div class="container mx-auto max-w-7xl p-4 md:p-8">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">Votre Panier</h1>

  <div class="flex flex-col lg:flex-row gap-8">
    <div class="lg:w-2/3">
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        @for (produit of produitsPanier; track $index) {
        <div class="flex items-center p-4 border-b border-gray-200">
          <img
            src="{{ produit.image }}"
            alt="{{ produit.nom }}"
            class="w-20 h-20 object-cover rounded-md mr-4"
          />
          <div class="grow">
            <h2 class="font-semibold text-gray-800">{{ produit.nom }}</h2>
            <p class="text-sm text-gray-500">Taille : M</p>
            <p class="text-green-600 font-bold mt-1">
              {{ produit.newPrix ? produit.newPrix : produit.prix }}
            </p>
          </div>
          <div class="flex items-center align-middle justify-center space-x-5">
            <div class="flex items-center border rounded-full">
              <button
                (click)="updateQuantity(produit.id, Math.max(1, produit.qteCom! - 1))"
                class="px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-l-full transition-all duration-200"
              >
                <i class="fa-solid fa-minus"></i>
              </button>
              <input
                type="number"
                min="1"
                [(ngModel)]="produit.qteCom"
                (change)="updateQuantity(produit.id, produit.qteCom!)"
                class="border-gray-300 text-center font-medium w-12 focus:outline-none focus:ring-0"
              />
              <button
                (click)="updateQuantity(produit.id, produit.qteCom! + 1)"
                class="px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-r-full transition-all duration-200"
              >
                <i class="fa-solid fa-plus"></i>
              </button>
            </div>
            <button
              class="text-red-500 hover:text-red-700 text-xl font-medium transition-colors duration-200"
              (click)="deleteItem(produit.id)"
            >
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
        }
      </div>
      <div class="text-right mt-4">
        <button
          (click)="clearCart()"
          class="text-sm text-gray-500 hover:text-red-600 hover:underline transition-all duration-200"
        >
          Vider le panier
        </button>
      </div>
    </div>

    <div class="lg:w-1/3">
      <div class="bg-white rounded-lg shadow-lg p-6 sticky top-8">
        <h2 class="text-xl font-bold text-gray-800 border-b pb-3 mb-4">Résumé de la commande</h2>

        <div class="space-y-3">
          <div class="flex justify-between text-gray-600">
            <span>Sous-total</span>
            <span>{{ panierService.panierFinal().total }} FCFA</span>
          </div>
          <div class="flex justify-between text-gray-600">
            <span>Livraison</span>
            <span>Gratuit</span>
          </div>
          <div class="flex justify-between text-gray-900 font-bold text-lg border-t pt-3 mt-3">
            <span>Total</span>
            <span>{{ panierService.panierFinal().total }} FCFA</span>
          </div>
        </div>

        <h3 class="text-lg font-semibold text-gray-800 mt-6 mb-3">Mode de paiement</h3>
        <div class="flex justify-between gap-3">
          <label
            class="payment-logo-option group w-1/3 aspect-square flex justify-center items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-300 hover:border-green-500"
          >
            <input type="radio" name="payment" value="om" class="hidden" />
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Orange_Money_logo.svg/1200px-Orange_Money_logo.svg.png"
              alt="Orange Money"
              class="h-6 object-contain"
            />
          </label>

          <label
            class="payment-logo-option group w-1/3 aspect-square flex justify-center items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-300 hover:border-green-500"
          >
            <input type="radio" name="payment" value="wave" class="hidden" />
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/e/ee/Wave_Mobile_Money_logo.png"
              alt="Wave"
              class="h-6 object-contain"
            />
          </label>

          <label
            class="payment-logo-option group w-1/3 aspect-square flex justify-center items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-300 hover:border-green-500"
          >
            <input type="radio" name="payment" value="cb" class="hidden" />
            <svg
              class="w-6 h-6 text-gray-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
              ></path>
            </svg>
          </label>
        </div>

        <button
          class="w-full bg-green-600 text-white font-bold py-3 rounded-full mt-6 hover:bg-green-700 transform hover:scale-105 transition-all duration-300"
        >
          Procéder au paiement
        </button>
      </div>
    </div>
  </div>
</div>
